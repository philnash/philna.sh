---
import Subscribe from "./Subscribe.astro";
import { SITE_AUTHOR } from "../consts";
import { stripDateFromSlug } from "../utils/blog_posts";
type Props = {
  pubDate: Date;
  subscribe?: Boolean;
  slug: string;
};
const { pubDate, subscribe, slug } = Astro.props;
---

<div class="post-meta">
  <p
    class="meta"
    style={{ viewTransitionName: `${stripDateFromSlug(slug)}-meta` }}
  >
    Published on
    <a href={Astro.url} class="u-url" itemprop="url mainEntityOfPage"
      ><time
        class="dt-published"
        datetime={pubDate.toISOString()}
        itemprop="datePublished"
        >{
          pubDate.toLocaleDateString("en-us", {
            year: "numeric",
            month: "short",
            day: "numeric",
          })
        }</time
      ></a
    >
    by
    <span itemprop="author" itemscope itemtype="http://schema.org/Person">
      <a class="p-author h-card" href={Astro.site} itemprop="url"
        ><span itemprop="name">{SITE_AUTHOR}</span></a
      >
    </span>
  </p>
  {subscribe && <Subscribe />}
</div>
